<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>NWB Workshops and Hackathons | Materials related to the Neurodata Without Borders (NWB) User Days Workshops and Hackathons</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="NWB Workshops and Hackathons" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Materials related to the Neurodata Without Borders (NWB) User Days Workshops and Hackathons" />
<meta property="og:description" content="Materials related to the Neurodata Without Borders (NWB) User Days Workshops and Hackathons" />
<link rel="canonical" href="http://nwb.org/nwb_hackathons/HCK07_2020_Seattle/projects/icephys_meta_analysis/" />
<meta property="og:url" content="http://nwb.org/nwb_hackathons/HCK07_2020_Seattle/projects/icephys_meta_analysis/" />
<meta property="og:site_name" content="NWB Workshops and Hackathons" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="NWB Workshops and Hackathons" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Materials related to the Neurodata Without Borders (NWB) User Days Workshops and Hackathons","headline":"NWB Workshops and Hackathons","url":"http://nwb.org/nwb_hackathons/HCK07_2020_Seattle/projects/icephys_meta_analysis/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/nwb_hackathons/assets/css/style.css?v=c195892c536e8b7cdc1c45d8570b96d2f6ed4aec">
    <link rel="shortcut icon" type="image/png" href="/nwb_hackathons/assets/favicon_96.png?v=c195892c536e8b7cdc1c45d8570b96d2f6ed4aec">


    <!-- for github edit ribbon; main include is in `assets/css/style.scss` -->
<!--[if lt IE 9]>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.ie.min.css" />
<![endif]-->

  </head>
  <body>

    <a class="github-fork-ribbon" href="https://github.com/NeurodataWithoutBorders/nwb_hackathons/edit/main/HCK07_2020_Seattle/projects/icephys_meta_analysis/README.md" data-ribbon="Edit this page" title="Edit this page">Edit this page</a>

    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://nwb.org/nwb_hackathons/">NWB Workshops and Hackathons</a></h1>
      

      <p><a href="/nwb_hackathons/HCK07_2020_Seattle/#ProjectsList"><img class="emoji" title=":rewind:" alt=":rewind:" src="https://github.githubassets.com/images/icons/emoji/unicode/23ea.png" height="20" width="20"> Back to the projects list</a></p>

<!-- For information on how to write GitHub .md files see https://guides.github.com/features/mastering-markdown/ -->

<h1 id="convert-annotate-and-co-analyze-icephys-datasets">Convert, annotate, and co-analyze icephys datasets</h1>

<h2 id="key-investigators">Key Investigators</h2>

<ul>
  <li>Shreejoy Tripathy (University of Toronto)</li>
  <li>Jim Berg (Allen Institute)</li>
  <li>Csaba Foldy (University of Zurich)</li>
  <li>Thomas Braun (byte physics e.K.)</li>
</ul>

<h2 id="project-description">Project Description</h2>

<p>Labs performing icephys are often delivering the same (or very similar) types of stimuli (e.g., steps, ramps, chirps, etc.). But labs have different ways of storing their data files (different formats and organization conventions) and have different ways of naming stimuli and groups of related stimuli.</p>

<p>We here aim to use NWB as a common language for storing icephys datasets and to adapt existing tools for annotating stimulus types and performing feature extraction. We aim to co-cluster datasets and recorded cells by feature similarity, similar to how is commonly done for single-cell transcriptomics datasets.</p>

<p>While this project is ambitious in scope, we plan to make use of tools that have already been developed for these purposes.</p>

<h2 id="objectives">Objectives</h2>

<ol>
  <li>Convert intracellular electrophysiological datasets provided by hackathon contributors to NWBv2 (if needed).</li>
  <li>Annotate the usage of common stimulus protocols across datasets, making use of and extending the Allen Institute icephys stimulus ontology. This objective is related to the subproject on <a href="https://neurodatawithoutborders.github.io/nwb_hackathons/HCK07_2020_Seattle/projects/stim_onto/">Stimulus representation and parametrization in NWB</a>.</li>
  <li>Extract features from icephys datasets using existing feature extraction libraries. This will likely require extending existing tools, like Allen Institute’s IPFX toolbox, to accommodate greater variability of input datasets.</li>
  <li>Co-cluster cells by electrophysiological feature similarity.</li>
</ol>

<h2 id="approach-and-plan">Approach and Plan</h2>
<p>Goal: Develop a prototype end-to-end pipeline for converting historical, external lab icephys datasets to NWBv2, annotating the usage of stimuli using a shared stimulus ontology, performing ephys feature extraction, and co-clustering cells by similarity in extracted ephys features onto icephys reference atlases provided by the Allen Institute.</p>

<p>Approach: We will focus our prototype on single-electrode icephys datasets reflecting somatic current clamp experiments that have been collected using pClamp with outputted files in Axon Binary File format (ABF). We will focus our stimulus annotation and feature extraction efforts on long current step stimuli.</p>

<p>Plan:</p>
<ol>
  <li>Convert: Convert external icephys files to nwbv2, focusing on current clamp icephys datasets stored in ABF (from Shreejoy’s collaborators and Csaba)</li>
  <li>Annotate: Fork the AIBS <a href="https://github.com/AllenInstitute/ipfx/blob/master/ipfx/defaults/stimulus_ontology.json">icephys stimulus ontology</a> to accommodate sweep names and categories from external datasets. For the hackathon, we will focus on the usage of long step current injections. This step will be performed in conjunction with the related hackathon project on <a href="https://neurodatawithoutborders.github.io/nwb_hackathons/HCK07_2020_Seattle/projects/stim_onto/">Stimulus representation and parametrization in NWB</a>.</li>
  <li>Extract: Load in converted nwbv2 datasets into the appropriate data structures needed for ipfx’s internal data structure, (ephys_data_set)[https://github.com/AllenInstitute/ipfx/blob/master/ipfx/ephys_data_set.py]. Then use ipfx’s feature extraction libraries to perform feature extraction. This will likely require disabling QC checking for IPFX.</li>
  <li>Co-cluster: Co-cluster cells by ephys similarity.</li>
</ol>

<h2 id="progress-and-next-steps">Progress and Next Steps</h2>

<h2 id="materials">Materials</h2>
<ol>
  <li>Python based tools for converting icephys datasets to NWB <a href="https://github.com/AllenInstitute/ipfx/tree/master/ipfx/x_to_nwb">x_to_nwb</a>
</li>
  <li><a href="https://github.com/AllenInstitute/ipfx/blob/master/ipfx/defaults/stimulus_ontology.json">icephys stimulus ontology</a></li>
  <li><a href="https://github.com/AllenInstitute/ipfx">ipfx feature extraction library</a></li>
</ol>

<h2 id="background-and-references">Background and References</h2>



    </div>

    <script src="/nwb_hackathons/assets/javascript/anchor-js/anchor.min.js"></script>
    <script>anchors.add();</script>
    
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-134749152-2', 'auto');
      ga('send', 'pageview');
    </script>
    
  </body>
</html>
